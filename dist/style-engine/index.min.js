var publisher;!function(){"use strict";var t={678:function(t,e,r){function n(t,e){const r=t.split(".");let n=[];return r.forEach(((t,e)=>{n=function(t,e,r){if(-1!==t.indexOf("[")){return t.split("[").forEach((t=>{r.push(t.replace(/\[|\]/g,""))})),r}return r.push(t.replace(/\[|\]/g,"")),r}(t,0,n)})),function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(o,e)}(...n)}function o(t,e){const r=/\[.*\]/gi;let n,o=t[e];for(;null!==(n=r.exec(e));)n.index===r.lastIndex&&r.lastIndex++,n.forEach((t=>{t[0]=t[0].replace(/\[|\]/g,""),o=o[t[0]]}));return o}r.d(e,{prepare:function(){return n}})},413:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}function i(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(e),r.d(e,{computedCssRules:function(){return s.Bv},createCssRule:function(){return s.Xg},default:function(){return u},injectHelpersToCssGenerators:function(){return s.W0}});var s=r(601);class u{constructor(t,e,r){let{type:n,function:o,selector:s,properties:u}=e;i(this,"name",""),i(this,"selector",""),i(this,"type","static"),i(this,"properties",{}),i(this,"blockProps",{}),i(this,"function",(()=>{})),this.name=t,this.type=n,this.selector=s,this.function=o,this.properties=u,this.blockProps=r}getPropValue(t){const{attributes:e}=this.blockProps;return t&&e[t]||e}rules(){const t=`add${this.type.charAt(0).toUpperCase()+this.type.slice(1)}Rule`;return this[t]?this[t]():""}convertToCssSelector(t){return t?`.${t.replace(/\s+/g,".")}`:""}setUniqueClassName(){this.selector&&(this.selector=this.selector.replace(/\.{{BLOCK_ID}}/g,`#block-${this.blockProps?.clientId}`).replace(/\.{{className}}/g,`.${this.convertToCssSelector(this.blockProps.attributes.className)}`))}addStaticRule(){return this.setUniqueClassName(),(0,s.Xg)(this)}addFunctionRule(){return this.getPropValue(this.name)?(this.setUniqueClassName(),this.function(this.name,this.blockProps,this)):""}}},601:function(t,e,r){r.d(e,{Bv:function(){return u},W0:function(){return s},Xg:function(){return c}});var n=r(413),o=r(678),i=r(819);const s=(t,e)=>(Object.values(e).forEach(((r,n)=>{r.forEach((r=>{"function"===r?.type&&(e[Object.keys(e)[n]]={...r,function:t[r.function]})}))})),e),u=(t,e)=>{let r="";const{cssGenerators:o=[]}=t;for(const t in o){if(!Object.hasOwnProperty.call(o,t))continue;const i=o[t];if(!i?.type)continue;r+=new n.default(t,i,e).rules()+"\n"}return r},c=t=>{if(!function(t,e){for(let r=0;r<e.length;r++)if(!t.hasOwnProperty(e[r]))return!1;return!0}(t,["selector","properties"]))return console.warn(`Style rule: ${JSON.stringify(t)} avoid css rule validation!`),"";const{properties:e=[],selector:r="",blockProps:n={}}=t;let s=[];const u=Object.keys(e),c=u.length-1;for(const t in e){if(!Object.hasOwnProperty.call(e,t))continue;const r=e[t];(0,i.isString)(r)?s.push(`${t}: ${r}${-1===r.indexOf(";")?";\n":"\n"}${c===u.indexOf(t)?"\n":""}`):console.warn(`CSS property value must be string given ${typeof r}, please double check properties.`)}return s=s.join("\n"),n?.attributes?(function(t){const e=/{{[^{}]+}}/gi,r=t.matchAll(e),n=[];for(const t of r)n.push(t[0].replace(/\{|\}/g,""));return n}(s).forEach((t=>{const e=(0,o.prepare)(t,n?.attributes);e&&(s=s.replace(t,e).replace(/\{|\}/g,""))})),`${r}{${s}}`):`${r}{${s}}`}},819:function(t){t.exports=window.lodash}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n=r(413);(publisher=void 0===publisher?{}:publisher).styleEngine=n}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUtGLEVBQVd0RixJQUczRSxFQ1BBOEUsRUFBb0JTLEVBQUksU0FBUzlGLEVBQUtnRyxHQUFRLE9BQU81RSxPQUFPaEIsVUFBVXlELGVBQWUvQyxLQUFLZCxFQUFLZ0csRUFBTyxFQ0N0R1gsRUFBb0JZLEVBQUksU0FBU2YsR0FDWCxvQkFBWGpGLFFBQTBCQSxPQUFPaUcsYUFDMUM5RSxPQUFPQyxlQUFlNkQsRUFBU2pGLE9BQU9pRyxZQUFhLENBQUUvRSxNQUFPLFdBRTdEQyxPQUFPQyxlQUFlNkQsRUFBUyxhQUFjLENBQUUvRCxPQUFPLEdBQ3ZELEVDSEEsSUFBSWdGLEVBQXNCZCxFQUFvQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVibGlzaGVyLy4vcGFja2FnZXMvZGF0YS1leHRyYWN0b3Ivc3JjL2luZGV4LmpzIiwid2VicGFjazovL3B1Ymxpc2hlci8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJvcGVydHlLZXkuanMiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJpbWl0aXZlLmpzIiwid2VicGFjazovL3B1Ymxpc2hlci8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvLi9wYWNrYWdlcy9zdHlsZS1lbmdpbmUvc3JjL2luZGV4LmpzIiwid2VicGFjazovL3B1Ymxpc2hlci8uL3BhY2thZ2VzL3N0eWxlLWVuZ2luZS9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyL2V4dGVybmFsIHdpbmRvdyBcImxvZGFzaFwiIiwid2VicGFjazovL3B1Ymxpc2hlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlKHF1ZXJ5OiBzdHJpbmcsIGRhdGFzZXQ6IE9iamVjdCk6IEFycmF5PHN0cmluZz4ge1xuXHRjb25zdCBwYXJzZWRRdWVyeSA9IHF1ZXJ5LnNwbGl0KCcuJyk7XG5cdGNvbnN0IGl0ZW1WYWx1ZSA9ICguLi52YWx1ZXMpID0+IHZhbHVlcy5yZWR1Y2UoYWNjdW11bGF0b3IsIGRhdGFzZXQpO1xuXG5cdGxldCBwcm9wcyA9IFtdO1xuXG5cdHBhcnNlZFF1ZXJ5LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG5cdFx0cHJvcHMgPSB0b0FycmF5KGl0ZW0sIGluZGV4LCBwcm9wcyk7XG5cdH0pO1xuXG5cdHJldHVybiBpdGVtVmFsdWUoLi4ucHJvcHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWNjdW11bGF0b3IoYSwgeCkge1xuXHRjb25zdCByZWdleHAgPSAvXFxbLipcXF0vZ2k7XG5cdGxldCB0ZW1wVmFsdWUgPSBhW3hdO1xuXHRsZXQgbTtcblxuXHR3aGlsZSAoKG0gPSByZWdleHAuZXhlYyh4KSkgIT09IG51bGwpIHtcblx0XHQvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCBpbmZpbml0ZSBsb29wcyB3aXRoIHplcm8td2lkdGggbWF0Y2hlc1xuXHRcdGlmIChtLmluZGV4ID09PSByZWdleHAubGFzdEluZGV4KSB7XG5cdFx0XHRyZWdleHAubGFzdEluZGV4Kys7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHJlc3VsdCBjYW4gYmUgYWNjZXNzZWQgdGhyb3VnaCB0aGUgYG1gLXZhcmlhYmxlLlxuXHRcdG0uZm9yRWFjaCgobWF0Y2gpID0+IHtcblx0XHRcdG1hdGNoWzBdID0gbWF0Y2hbMF0ucmVwbGFjZSgvXFxbfFxcXS9nLCAnJyk7XG5cblx0XHRcdHRlbXBWYWx1ZSA9IHRlbXBWYWx1ZVttYXRjaFswXV07XG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4gdGVtcFZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheShpdGVtLCBpbmRleCwgYXJyKSB7XG5cdGlmICgtMSAhPT0gaXRlbS5pbmRleE9mKCdbJykpIHtcblx0XHRjb25zdCBkZXRhaWxzID0gaXRlbS5zcGxpdCgnWycpO1xuXG5cdFx0ZGV0YWlscy5mb3JFYWNoKChfaXRlbSkgPT4ge1xuXHRcdFx0YXJyLnB1c2goX2l0ZW0ucmVwbGFjZSgvXFxbfFxcXS9nLCAnJykpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGFycjtcblx0fVxuXG5cdGFyci5wdXNoKGl0ZW0ucmVwbGFjZSgvXFxbfFxcXS9nLCAnJykpO1xuXG5cdHJldHVybiBhcnI7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgfSwgX3R5cGVvZihvYmopO1xufSIsImltcG9ydCBfdHlwZW9mIGZyb20gXCIuL3R5cGVvZi5qc1wiO1xuaW1wb3J0IHRvUHJpbWl0aXZlIGZyb20gXCIuL3RvUHJpbWl0aXZlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHtcbiAgdmFyIGtleSA9IHRvUHJpbWl0aXZlKGFyZywgXCJzdHJpbmdcIik7XG4gIHJldHVybiBfdHlwZW9mKGtleSkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn0iLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkge1xuICBpZiAoX3R5cGVvZihpbnB1dCkgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKF90eXBlb2YocmVzKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJlcztcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7XG4gIH1cbiAgcmV0dXJuIChoaW50ID09PSBcInN0cmluZ1wiID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7XG59IiwiaW1wb3J0IHRvUHJvcGVydHlLZXkgZnJvbSBcIi4vdG9Qcm9wZXJ0eUtleS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSB0b1Byb3BlcnR5S2V5KGtleSk7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBvYmo7XG59IiwiaW1wb3J0IHsgY3JlYXRlQ3NzUnVsZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQge1xuXHRjcmVhdGVDc3NSdWxlLFxuXHRjb21wdXRlZENzc1J1bGVzLFxuXHRpbmplY3RIZWxwZXJzVG9Dc3NHZW5lcmF0b3JzLFxufSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3NzR2VuZXJhdG9ycyB7XG5cdG5hbWUgPSAnJztcblx0c2VsZWN0b3IgPSAnJztcblx0dHlwZSA9ICdzdGF0aWMnO1xuXHRwcm9wZXJ0aWVzID0ge307XG5cdGJsb2NrUHJvcHMgPSB7fTtcblx0ZnVuY3Rpb24gPSAoKSA9PiB7fTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRuYW1lOiBzdHJpbmcsXG5cdFx0eyB0eXBlLCBmdW5jdGlvbjogY2FsbGJhY2ssIHNlbGVjdG9yLCBwcm9wZXJ0aWVzIH06IE9iamVjdCxcblx0XHRibG9ja1Byb3BzOiBPYmplY3Rcblx0KSB7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0XHR0aGlzLmZ1bmN0aW9uID0gY2FsbGJhY2s7XG5cdFx0dGhpcy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcblx0XHR0aGlzLmJsb2NrUHJvcHMgPSBibG9ja1Byb3BzO1xuXHR9XG5cblx0Z2V0UHJvcFZhbHVlKGF0dHJpYnV0ZU5hbWU6IHN0cmluZykge1xuXHRcdGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gdGhpcy5ibG9ja1Byb3BzO1xuXG5cdFx0cmV0dXJuIGF0dHJpYnV0ZU5hbWVcblx0XHRcdD8gYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSB8fCBhdHRyaWJ1dGVzXG5cdFx0XHQ6IGF0dHJpYnV0ZXM7XG5cdH1cblxuXHRydWxlcygpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGFkZFJ1bGUgPSBgYWRkJHtcblx0XHRcdHRoaXMudHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMudHlwZS5zbGljZSgxKVxuXHRcdH1SdWxlYDtcblxuXHRcdGlmICghdGhpc1thZGRSdWxlXSkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzW2FkZFJ1bGVdKCk7XG5cdH1cblxuXHRjb252ZXJ0VG9Dc3NTZWxlY3Rvcihjc3NDbGFzc2VzOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmICghY3NzQ2xhc3Nlcykge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdHJldHVybiBgLiR7Y3NzQ2xhc3Nlcy5yZXBsYWNlKC9cXHMrL2csICcuJyl9YDtcblx0fVxuXG5cdHNldFVuaXF1ZUNsYXNzTmFtZSgpIHtcblx0XHRpZiAoIXRoaXMuc2VsZWN0b3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnNlbGVjdG9yID0gdGhpcy5zZWxlY3RvclxuXHRcdFx0LnJlcGxhY2UoL1xcLnt7QkxPQ0tfSUR9fS9nLCBgI2Jsb2NrLSR7dGhpcy5ibG9ja1Byb3BzPy5jbGllbnRJZH1gKVxuXHRcdFx0LnJlcGxhY2UoXG5cdFx0XHRcdC9cXC57e2NsYXNzTmFtZX19L2csXG5cdFx0XHRcdGAuJHt0aGlzLmNvbnZlcnRUb0Nzc1NlbGVjdG9yKFxuXHRcdFx0XHRcdHRoaXMuYmxvY2tQcm9wcy5hdHRyaWJ1dGVzLmNsYXNzTmFtZVxuXHRcdFx0XHQpfWBcblx0XHRcdCk7XG5cdH1cblxuXHRhZGRTdGF0aWNSdWxlKCkge1xuXHRcdHRoaXMuc2V0VW5pcXVlQ2xhc3NOYW1lKCk7XG5cblx0XHRyZXR1cm4gY3JlYXRlQ3NzUnVsZSh0aGlzKTtcblx0fVxuXG5cdGFkZEZ1bmN0aW9uUnVsZSgpOiBzdHJpbmcge1xuXHRcdGlmICghdGhpcy5nZXRQcm9wVmFsdWUodGhpcy5uYW1lKSkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdHRoaXMuc2V0VW5pcXVlQ2xhc3NOYW1lKCk7XG5cblx0XHRyZXR1cm4gdGhpcy5mdW5jdGlvbih0aGlzLm5hbWUsIHRoaXMuYmxvY2tQcm9wcywgdGhpcyk7XG5cdH1cbn1cbiIsIi8qKlxuICogSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCBDc3NHZW5lcmF0b3JzIGZyb20gJ0BwdWJsaXNoZXIvc3R5bGUtZW5naW5lJztcbmltcG9ydCB7IHByZXBhcmUgfSBmcm9tICdAcHVibGlzaGVyL2RhdGEtZXh0cmFjdG9yJztcbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnbG9kYXNoJztcblxuLyoqXG4gKiBIYXMgb2JqZWN0IGFsbCBwYXNzZWQgcHJvcGVydGllcz9cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIHRoZSBhbnkgb2JqZWN0XG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBwcm9wcyB0aGUgcHJvcHMgb2YgYW55IG9iamVjdFxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSB3aGVuIG90aGVyd2lzZSFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0FsbFByb3BlcnRpZXMob2JqOiBPYmplY3QsIHByb3BzOiBBcnJheTxzdHJpbmc+KTogYm9vbGVhbiB7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShwcm9wc1tpXSkpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBJbmplY3Rpb24gaGVscGVycyBpbnRvIGdlbmVyYXRvcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGhlbHBlcnMgVGhlIGhlbHBlciBmdW5jdGlvbiB0byBpbmplY3RlZCBjdXJyZW50IGNzcyBnZW5lcmF0b3IuXG4gKiBAcGFyYW0ge09iamVjdH0gZ2VuZXJhdG9ycyBUaGUgY3NzIGdlbmVyYXRvcnMgbGlzdCBhcyBPYmplY3RcbiAqIEByZXR1cm4ge09iamVjdH0gZ2VuZXJhdG9ycyB3aXRoIGluY2x1ZGVzIGhlbHBlciBmdW5jdGlvbnMhXG4gKi9cbmV4cG9ydCBjb25zdCBpbmplY3RIZWxwZXJzVG9Dc3NHZW5lcmF0b3JzID0gKFxuXHRoZWxwZXJzOiBPYmplY3QsXG5cdGdlbmVyYXRvcnM6IE9iamVjdFxuKSA9PiB7XG5cdE9iamVjdC52YWx1ZXMoZ2VuZXJhdG9ycykuZm9yRWFjaCgoZ2VuZXJhdG9yLCBpbmRleCkgPT4ge1xuXHRcdGdlbmVyYXRvci5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRpZiAoJ2Z1bmN0aW9uJyA9PT0gaXRlbT8udHlwZSkge1xuXHRcdFx0XHRnZW5lcmF0b3JzW09iamVjdC5rZXlzKGdlbmVyYXRvcnMpW2luZGV4XV0gPSB7XG5cdFx0XHRcdFx0Li4uaXRlbSxcblx0XHRcdFx0XHRmdW5jdGlvbjogaGVscGVyc1tpdGVtLmZ1bmN0aW9uXSxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cblx0cmV0dXJuIGdlbmVyYXRvcnM7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIGNvbXB1dGVkIGNzcyBydWxlcyB3aXRoIHVzYWdlIG9mIHJlZ2lzdGVyZWQgQ1NTIEdlbmVyYXRvcnMgcnVubmVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBibG9ja1R5cGUgVGhlIGN1cnJlbnQgYmxvY2sgdHlwZVxuICogQHBhcmFtIHsqfSBibG9ja1Byb3BzIFRoZSBjdXJyZW50IGJsb2NrIHByb3BlcnRpZXNcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGN1cnJlbnQgYmxvY2sgY3NzIG91dHB1dCBvZiBjc3MgZ2VuZXJhdG9ycyFcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbXB1dGVkQ3NzUnVsZXMgPSAoXG5cdGJsb2NrVHlwZTogT2JqZWN0LFxuXHRibG9ja1Byb3BzOiBPYmplY3Rcbik6IHN0cmluZyA9PiB7XG5cdGxldCBjc3MgPSAnJztcblx0Y29uc3QgeyBjc3NHZW5lcmF0b3JzID0gW10gfSA9IGJsb2NrVHlwZTtcblxuXHRmb3IgKGNvbnN0IGNvbnRyb2xJZCBpbiBjc3NHZW5lcmF0b3JzKSB7XG5cdFx0aWYgKCFPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChjc3NHZW5lcmF0b3JzLCBjb250cm9sSWQpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBnZW5lcmF0b3IgPSBjc3NHZW5lcmF0b3JzW2NvbnRyb2xJZF07XG5cblx0XHRpZiAoIWdlbmVyYXRvcj8udHlwZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3NzR2VuZXJhdG9yID0gbmV3IENzc0dlbmVyYXRvcnMoXG5cdFx0XHRjb250cm9sSWQsXG5cdFx0XHRnZW5lcmF0b3IsXG5cdFx0XHRibG9ja1Byb3BzXG5cdFx0KTtcblxuXHRcdGNzcyArPSBjc3NHZW5lcmF0b3IucnVsZXMoKSArICdcXG4nO1xuXHR9XG5cblx0cmV0dXJuIGNzcztcbn07XG5cbi8qKlxuICogQ3JlYXRpbmcgQ1NTIFJ1bGUhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHN0eWxlIFRoZSBzdHlsZSBvYmplY3RcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNyZWF0ZWQgQ1NTIFJ1bGUhXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVDc3NSdWxlID0gKHN0eWxlOiBPYmplY3QpOiBzdHJpbmcgPT4ge1xuXHRpZiAoIWhhc0FsbFByb3BlcnRpZXMoc3R5bGUsIFsnc2VsZWN0b3InLCAncHJvcGVydGllcyddKSkge1xuXHRcdGNvbnNvbGUud2Fybihcblx0XHRcdGBTdHlsZSBydWxlOiAke0pTT04uc3RyaW5naWZ5KHN0eWxlKX0gYXZvaWQgY3NzIHJ1bGUgdmFsaWRhdGlvbiFgXG5cdFx0KTtcblx0XHRyZXR1cm4gJyc7XG5cdH1cblxuXHRjb25zdCB7IHByb3BlcnRpZXMgPSBbXSwgc2VsZWN0b3IgPSAnJywgYmxvY2tQcm9wcyA9IHt9IH0gPSBzdHlsZTtcblxuXHRsZXQgc3R5bGVCb2R5ID0gW107XG5cdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKTtcblx0Y29uc3QgbGFzdEtleUluZGV4ID0ga2V5cy5sZW5ndGggLSAxO1xuXG5cdGZvciAoY29uc3QgcHJvcGVydHkgaW4gcHJvcGVydGllcykge1xuXHRcdGlmICghT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywgcHJvcGVydHkpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCB2YWx1ZSA9IHByb3BlcnRpZXNbcHJvcGVydHldO1xuXG5cdFx0aWYgKCFpc1N0cmluZyh2YWx1ZSkpIHtcblx0XHRcdGNvbnNvbGUud2Fybihcblx0XHRcdFx0YENTUyBwcm9wZXJ0eSB2YWx1ZSBtdXN0IGJlIHN0cmluZyBnaXZlbiAke3R5cGVvZiB2YWx1ZX0sIHBsZWFzZSBkb3VibGUgY2hlY2sgcHJvcGVydGllcy5gXG5cdFx0XHQpO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0c3R5bGVCb2R5LnB1c2goXG5cdFx0XHRgJHtwcm9wZXJ0eX06ICR7dmFsdWV9JHstMSA9PT0gdmFsdWUuaW5kZXhPZignOycpID8gJztcXG4nIDogJ1xcbid9JHtcblx0XHRcdFx0bGFzdEtleUluZGV4ID09PSBrZXlzLmluZGV4T2YocHJvcGVydHkpID8gJ1xcbicgOiAnJ1xuXHRcdFx0fWBcblx0XHQpO1xuXHR9XG5cblx0c3R5bGVCb2R5ID0gc3R5bGVCb2R5LmpvaW4oJ1xcbicpO1xuXG5cdGlmICghYmxvY2tQcm9wcz8uYXR0cmlidXRlcykge1xuXHRcdHJldHVybiBgJHtzZWxlY3Rvcn17JHtzdHlsZUJvZHl9fWA7XG5cdH1cblxuXHRnZXRWYXJzKHN0eWxlQm9keSkuZm9yRWFjaCgocXVlcnkpID0+IHtcblx0XHRjb25zdCByZXBsYWNlbWVudCA9IHByZXBhcmUocXVlcnksIGJsb2NrUHJvcHM/LmF0dHJpYnV0ZXMpO1xuXG5cdFx0aWYgKCFyZXBsYWNlbWVudCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHN0eWxlQm9keSA9IHN0eWxlQm9keS5yZXBsYWNlKHF1ZXJ5LCByZXBsYWNlbWVudCkucmVwbGFjZSgvXFx7fFxcfS9nLCAnJyk7XG5cdH0pO1xuXG5cdHJldHVybiBgJHtzZWxlY3Rvcn17JHtzdHlsZUJvZHl9fWA7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIGR5bmFtaWMgdmFyaWFibGVzIGZyb20gcXVlcmllcyFcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcmllcyBUaGUgcXVlcmllcyBhcyBzdHJpbmcuIEV4YW1wbGU6IFwie3t4LnlbMl0uen19IHt7eC5hfX1cIlxuICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gVGhlIGR5bmFtaWMgdmFyaWFibGVzIGxpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhcnMocXVlcmllczogc3RyaW5nKTogQXJyYXk8c3RyaW5nPiB7XG5cdGNvbnN0IHJlZ2V4ID0gL3t7W157fV0rfX0vZ2k7XG5cdGNvbnN0IG1hdGNoZXMgPSBxdWVyaWVzLm1hdGNoQWxsKHJlZ2V4KTtcblx0Y29uc3QgcmVwbGFjZW1lbnRzID0gW107XG5cblx0Zm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG5cdFx0cmVwbGFjZW1lbnRzLnB1c2gobWF0Y2hbMF0ucmVwbGFjZSgvXFx7fFxcfS9nLCAnJykpO1xuXHR9XG5cblx0cmV0dXJuIHJlcGxhY2VtZW50cztcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gd2luZG93W1wibG9kYXNoXCJdOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDEzKTtcbiJdLCJuYW1lcyI6WyJwcmVwYXJlIiwicXVlcnkiLCJkYXRhc2V0IiwicGFyc2VkUXVlcnkiLCJzcGxpdCIsInByb3BzIiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsImFyciIsImluZGV4T2YiLCJfaXRlbSIsInB1c2giLCJyZXBsYWNlIiwidG9BcnJheSIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ2YWx1ZXMiLCJBcnJheSIsIl9rZXkiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsIml0ZW1WYWx1ZSIsImEiLCJ4IiwicmVnZXhwIiwibSIsInRlbXBWYWx1ZSIsImV4ZWMiLCJsYXN0SW5kZXgiLCJtYXRjaCIsIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiX3RvUHJvcGVydHlLZXkiLCJhcmciLCJrZXkiLCJpbnB1dCIsImhpbnQiLCJwcmltIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJjYWxsIiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiTnVtYmVyIiwiX2RlZmluZVByb3BlcnR5IiwidmFsdWUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIkNzc0dlbmVyYXRvcnMiLCJuYW1lIiwiX3JlZiIsImJsb2NrUHJvcHMiLCJ0eXBlIiwiZnVuY3Rpb24iLCJjYWxsYmFjayIsInNlbGVjdG9yIiwicHJvcGVydGllcyIsInRoaXMiLCJnZXRQcm9wVmFsdWUiLCJhdHRyaWJ1dGVOYW1lIiwiYXR0cmlidXRlcyIsInJ1bGVzIiwiYWRkUnVsZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJjb252ZXJ0VG9Dc3NTZWxlY3RvciIsImNzc0NsYXNzZXMiLCJzZXRVbmlxdWVDbGFzc05hbWUiLCJjbGllbnRJZCIsImNsYXNzTmFtZSIsImFkZFN0YXRpY1J1bGUiLCJjcmVhdGVDc3NSdWxlIiwiYWRkRnVuY3Rpb25SdWxlIiwiaW5qZWN0SGVscGVyc1RvQ3NzR2VuZXJhdG9ycyIsImhlbHBlcnMiLCJnZW5lcmF0b3JzIiwiZ2VuZXJhdG9yIiwia2V5cyIsImNvbXB1dGVkQ3NzUnVsZXMiLCJibG9ja1R5cGUiLCJjc3MiLCJjc3NHZW5lcmF0b3JzIiwiY29udHJvbElkIiwiaGFzT3duUHJvcGVydHkiLCJzdHlsZSIsImkiLCJoYXNBbGxQcm9wZXJ0aWVzIiwiY29uc29sZSIsIndhcm4iLCJKU09OIiwic3RyaW5naWZ5Iiwic3R5bGVCb2R5IiwibGFzdEtleUluZGV4IiwicHJvcGVydHkiLCJpc1N0cmluZyIsImpvaW4iLCJxdWVyaWVzIiwicmVnZXgiLCJtYXRjaGVzIiwibWF0Y2hBbGwiLCJyZXBsYWNlbWVudHMiLCJnZXRWYXJzIiwicmVwbGFjZW1lbnQiLCJtb2R1bGUiLCJleHBvcnRzIiwid2luZG93IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZ2V0IiwicHJvcCIsInIiLCJ0b1N0cmluZ1RhZyIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9