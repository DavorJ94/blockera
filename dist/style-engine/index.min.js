var publisher;!function(){"use strict";var t={678:function(t,e,r){function n(t,e){const r=t.split(".");let n=[];return r.forEach(((t,e)=>{n=function(t,e,r){if(-1!==t.indexOf("[")){return t.split("[").forEach((t=>{r.push(t.replace(/\[|\]/g,""))})),r}return r.push(t.replace(/\[|\]/g,"")),r}(t,0,n)})),function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(o,e)}(...n)}function o(t,e){const r=/\[.*\]/gi;let n,o=t[e];for(;null!==(n=r.exec(e));)n.index===r.lastIndex&&r.lastIndex++,n.forEach((t=>{t[0]=t[0].replace(/\[|\]/g,""),o=o[t[0]]}));return o}r.d(e,{prepare:function(){return n}})},413:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}function i(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(e),r.d(e,{computedCssRules:function(){return s.Bv},createCssRule:function(){return s.Xg},default:function(){return u},injectHelpersToCssGenerators:function(){return s.W0}});var s=r(601);class u{constructor(t,e,r){let{type:n,function:o,selector:s,properties:u}=e;i(this,"name",""),i(this,"selector",""),i(this,"type","static"),i(this,"properties",{}),i(this,"blockProps",{}),i(this,"function",(()=>{})),this.name=t,this.type=n,this.selector=s,this.function=o,this.properties=u,this.blockProps=r}getPropValue(t){const{attributes:e}=this.blockProps;return t&&e[t]||e}rules(){const t=`add${this.type.charAt(0).toUpperCase()+this.type.slice(1)}Rule`;return this[t]?this[t]():""}setUniqueClassName(){this.selector=this.selector.replace(/\.{{BLOCK_ID}}/g,`.publisher-core.extension.publisher-extension-ref.client-id-${this.blockProps?.clientId}`)}addStaticRule(){return this.setUniqueClassName(),(0,s.Xg)(this)}addFunctionRule(){return this.getPropValue(this.name)?this.function(this.name,this.blockProps,this):""}}},601:function(t,e,r){r.d(e,{Bv:function(){return u},W0:function(){return s},Xg:function(){return c}});var n=r(413),o=r(678),i=r(819);const s=(t,e)=>(Object.values(e).forEach(((r,n)=>{r.forEach((r=>{"function"===r?.type&&(e[Object.keys(e)[n]]={...r,function:t[r.function]})}))})),e),u=(t,e)=>{let r="";const{publisherCssGenerators:o=[]}=t;for(const t in o){if(!Object.hasOwnProperty.call(o,t))continue;const i=o[t];if(!i?.type)continue;r+=new n.default(t,i,e).rules()+"\n"}return r},c=t=>{if(!function(t,e){for(let r=0;r<e.length;r++)if(!t.hasOwnProperty(e[r]))return!1;return!0}(t,["selector","properties"]))return console.warn(`Style rule: %o ${JSON.stringify(t)} avoid css rule validation!`),"";const{properties:e=[],selector:r="",blockProps:n={}}=t;let s=[];const u=Object.keys(e),c=u.length-1;for(const t in e){if(!Object.hasOwnProperty.call(e,t))continue;const r=e[t];(0,i.isString)(r)?s.push(`${t}: ${r}${-1===r.indexOf(";")?";\n":"\n"}${c===u.indexOf(t)?"\n":""}`):console.warn(`CSS property value must be string given ${typeof r}, please double check properties.`)}return s=s.join("\n"),n?.attributes?(function(t){const e=/{{[^{}]+}}/gi,r=t.matchAll(e),n=[];for(const t of r)n.push(t[0].replace(/\{|\}/g,""));return n}(s).forEach((t=>{const e=(0,o.prepare)(t,n?.attributes);e&&(s=s.replace(t,e).replace(/\{|\}/g,""))})),`${r}{${s}}`):`${r}{${s}}`}},819:function(t){t.exports=window.lodash}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n=r(413);(publisher=void 0===publisher?{}:publisher).styleEngine=n}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTBCQSxPQUFPOEYsYUFDMUMzRSxPQUFPQyxlQUFlMEQsRUFBUzlFLE9BQU84RixZQUFhLENBQUU1RSxNQUFPLFdBRTdEQyxPQUFPQyxlQUFlMEQsRUFBUyxhQUFjLENBQUU1RCxPQUFPLEdBQ3ZELEVDSEEsSUFBSTZFLEVBQXNCZCxFQUFvQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVibGlzaGVyLy4vcGFja2FnZXMvZGF0YS1leHRyYWN0b3Ivc3JjL2luZGV4LmpzIiwid2VicGFjazovL3B1Ymxpc2hlci8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJvcGVydHlLZXkuanMiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJpbWl0aXZlLmpzIiwid2VicGFjazovL3B1Ymxpc2hlci8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvLi9wYWNrYWdlcy9zdHlsZS1lbmdpbmUvc3JjL2luZGV4LmpzIiwid2VicGFjazovL3B1Ymxpc2hlci8uL3BhY2thZ2VzL3N0eWxlLWVuZ2luZS9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyL2V4dGVybmFsIHdpbmRvdyBcImxvZGFzaFwiIiwid2VicGFjazovL3B1Ymxpc2hlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vcHVibGlzaGVyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9wdWJsaXNoZXIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlKHF1ZXJ5OiBzdHJpbmcsIGRhdGFzZXQ6IE9iamVjdCk6IEFycmF5PHN0cmluZz4ge1xuXHRjb25zdCBwYXJzZWRRdWVyeSA9IHF1ZXJ5LnNwbGl0KCcuJyk7XG5cdGNvbnN0IGl0ZW1WYWx1ZSA9ICguLi52YWx1ZXMpID0+IHZhbHVlcy5yZWR1Y2UoYWNjdW11bGF0b3IsIGRhdGFzZXQpO1xuXG5cdGxldCBwcm9wcyA9IFtdO1xuXG5cdHBhcnNlZFF1ZXJ5LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG5cdFx0cHJvcHMgPSB0b0FycmF5KGl0ZW0sIGluZGV4LCBwcm9wcyk7XG5cdH0pO1xuXG5cdHJldHVybiBpdGVtVmFsdWUoLi4ucHJvcHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWNjdW11bGF0b3IoYSwgeCkge1xuXHRjb25zdCByZWdleHAgPSAvXFxbLipcXF0vZ2k7XG5cdGxldCB0ZW1wVmFsdWUgPSBhW3hdO1xuXHRsZXQgbTtcblxuXHR3aGlsZSAoKG0gPSByZWdleHAuZXhlYyh4KSkgIT09IG51bGwpIHtcblx0XHQvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCBpbmZpbml0ZSBsb29wcyB3aXRoIHplcm8td2lkdGggbWF0Y2hlc1xuXHRcdGlmIChtLmluZGV4ID09PSByZWdleHAubGFzdEluZGV4KSB7XG5cdFx0XHRyZWdleHAubGFzdEluZGV4Kys7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHJlc3VsdCBjYW4gYmUgYWNjZXNzZWQgdGhyb3VnaCB0aGUgYG1gLXZhcmlhYmxlLlxuXHRcdG0uZm9yRWFjaCgobWF0Y2gpID0+IHtcblx0XHRcdG1hdGNoWzBdID0gbWF0Y2hbMF0ucmVwbGFjZSgvXFxbfFxcXS9nLCAnJyk7XG5cblx0XHRcdHRlbXBWYWx1ZSA9IHRlbXBWYWx1ZVttYXRjaFswXV07XG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4gdGVtcFZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheShpdGVtLCBpbmRleCwgYXJyKSB7XG5cdGlmICgtMSAhPT0gaXRlbS5pbmRleE9mKCdbJykpIHtcblx0XHRjb25zdCBkZXRhaWxzID0gaXRlbS5zcGxpdCgnWycpO1xuXG5cdFx0ZGV0YWlscy5mb3JFYWNoKChfaXRlbSkgPT4ge1xuXHRcdFx0YXJyLnB1c2goX2l0ZW0ucmVwbGFjZSgvXFxbfFxcXS9nLCAnJykpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGFycjtcblx0fVxuXG5cdGFyci5wdXNoKGl0ZW0ucmVwbGFjZSgvXFxbfFxcXS9nLCAnJykpO1xuXG5cdHJldHVybiBhcnI7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgfSwgX3R5cGVvZihvYmopO1xufSIsImltcG9ydCBfdHlwZW9mIGZyb20gXCIuL3R5cGVvZi5qc1wiO1xuaW1wb3J0IHRvUHJpbWl0aXZlIGZyb20gXCIuL3RvUHJpbWl0aXZlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHtcbiAgdmFyIGtleSA9IHRvUHJpbWl0aXZlKGFyZywgXCJzdHJpbmdcIik7XG4gIHJldHVybiBfdHlwZW9mKGtleSkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn0iLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkge1xuICBpZiAoX3R5cGVvZihpbnB1dCkgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKF90eXBlb2YocmVzKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJlcztcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7XG4gIH1cbiAgcmV0dXJuIChoaW50ID09PSBcInN0cmluZ1wiID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7XG59IiwiaW1wb3J0IHRvUHJvcGVydHlLZXkgZnJvbSBcIi4vdG9Qcm9wZXJ0eUtleS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSB0b1Byb3BlcnR5S2V5KGtleSk7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBvYmo7XG59IiwiaW1wb3J0IHsgY3JlYXRlQ3NzUnVsZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQge1xuXHRjcmVhdGVDc3NSdWxlLFxuXHRjb21wdXRlZENzc1J1bGVzLFxuXHRpbmplY3RIZWxwZXJzVG9Dc3NHZW5lcmF0b3JzLFxufSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3NzR2VuZXJhdG9ycyB7XG5cdG5hbWUgPSAnJztcblx0c2VsZWN0b3IgPSAnJztcblx0dHlwZSA9ICdzdGF0aWMnO1xuXHRwcm9wZXJ0aWVzID0ge307XG5cdGJsb2NrUHJvcHMgPSB7fTtcblx0ZnVuY3Rpb24gPSAoKSA9PiB7fTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRuYW1lOiBzdHJpbmcsXG5cdFx0eyB0eXBlLCBmdW5jdGlvbjogY2FsbGJhY2ssIHNlbGVjdG9yLCBwcm9wZXJ0aWVzIH06IE9iamVjdCxcblx0XHRibG9ja1Byb3BzOiBPYmplY3Rcblx0KSB7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0XHR0aGlzLmZ1bmN0aW9uID0gY2FsbGJhY2s7XG5cdFx0dGhpcy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcblx0XHR0aGlzLmJsb2NrUHJvcHMgPSBibG9ja1Byb3BzO1xuXHR9XG5cblx0Z2V0UHJvcFZhbHVlKGF0dHJpYnV0ZU5hbWU6IHN0cmluZykge1xuXHRcdGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gdGhpcy5ibG9ja1Byb3BzO1xuXG5cdFx0cmV0dXJuIGF0dHJpYnV0ZU5hbWVcblx0XHRcdD8gYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSB8fCBhdHRyaWJ1dGVzXG5cdFx0XHQ6IGF0dHJpYnV0ZXM7XG5cdH1cblxuXHRydWxlcygpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGFkZFJ1bGUgPSBgYWRkJHtcblx0XHRcdHRoaXMudHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMudHlwZS5zbGljZSgxKVxuXHRcdH1SdWxlYDtcblxuXHRcdGlmICghdGhpc1thZGRSdWxlXSkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzW2FkZFJ1bGVdKCk7XG5cdH1cblxuXHRzZXRVbmlxdWVDbGFzc05hbWUoKSB7XG5cdFx0dGhpcy5zZWxlY3RvciA9IHRoaXMuc2VsZWN0b3IucmVwbGFjZShcblx0XHRcdC9cXC57e0JMT0NLX0lEfX0vZyxcblx0XHRcdGAucHVibGlzaGVyLWNvcmUuZXh0ZW5zaW9uLnB1Ymxpc2hlci1leHRlbnNpb24tcmVmLmNsaWVudC1pZC0ke3RoaXMuYmxvY2tQcm9wcz8uY2xpZW50SWR9YFxuXHRcdCk7XG5cdH1cblxuXHRhZGRTdGF0aWNSdWxlKCkge1xuXHRcdHRoaXMuc2V0VW5pcXVlQ2xhc3NOYW1lKCk7XG5cblx0XHRyZXR1cm4gY3JlYXRlQ3NzUnVsZSh0aGlzKTtcblx0fVxuXG5cdGFkZEZ1bmN0aW9uUnVsZSgpOiBzdHJpbmcge1xuXHRcdGlmICghdGhpcy5nZXRQcm9wVmFsdWUodGhpcy5uYW1lKSkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmZ1bmN0aW9uKHRoaXMubmFtZSwgdGhpcy5ibG9ja1Byb3BzLCB0aGlzKTtcblx0fVxufVxuIiwiLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IENzc0dlbmVyYXRvcnMgZnJvbSAnQHB1Ymxpc2hlci9zdHlsZS1lbmdpbmUnO1xuaW1wb3J0IHsgcHJlcGFyZSB9IGZyb20gJ0BwdWJsaXNoZXIvZGF0YS1leHRyYWN0b3InO1xuaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICdsb2Rhc2gnO1xuXG4vKipcbiAqIEhhcyBvYmplY3QgYWxsIHBhc3NlZCBwcm9wZXJ0aWVzP1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIGFueSBvYmplY3RcbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHByb3BzIHRoZSBwcm9wcyBvZiBhbnkgb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIHdoZW4gb3RoZXJ3aXNlIVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzQWxsUHJvcGVydGllcyhvYmo6IE9iamVjdCwgcHJvcHM6IEFycmF5PHN0cmluZz4pOiBib29sZWFuIHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmICghb2JqLmhhc093blByb3BlcnR5KHByb3BzW2ldKSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEluamVjdGlvbiBoZWxwZXJzIGludG8gZ2VuZXJhdG9ycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaGVscGVycyBUaGUgaGVscGVyIGZ1bmN0aW9uIHRvIGluamVjdGVkIGN1cnJlbnQgY3NzIGdlbmVyYXRvci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBnZW5lcmF0b3JzIFRoZSBjc3MgZ2VuZXJhdG9ycyBsaXN0IGFzIE9iamVjdFxuICogQHJldHVybiB7T2JqZWN0fSBnZW5lcmF0b3JzIHdpdGggaW5jbHVkZXMgaGVscGVyIGZ1bmN0aW9ucyFcbiAqL1xuZXhwb3J0IGNvbnN0IGluamVjdEhlbHBlcnNUb0Nzc0dlbmVyYXRvcnMgPSAoXG5cdGhlbHBlcnM6IE9iamVjdCxcblx0Z2VuZXJhdG9yczogT2JqZWN0XG4pID0+IHtcblx0T2JqZWN0LnZhbHVlcyhnZW5lcmF0b3JzKS5mb3JFYWNoKChnZW5lcmF0b3IsIGluZGV4KSA9PiB7XG5cdFx0Z2VuZXJhdG9yLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdGlmICgnZnVuY3Rpb24nID09PSBpdGVtPy50eXBlKSB7XG5cdFx0XHRcdGdlbmVyYXRvcnNbT2JqZWN0LmtleXMoZ2VuZXJhdG9ycylbaW5kZXhdXSA9IHtcblx0XHRcdFx0XHQuLi5pdGVtLFxuXHRcdFx0XHRcdGZ1bmN0aW9uOiBoZWxwZXJzW2l0ZW0uZnVuY3Rpb25dLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRyZXR1cm4gZ2VuZXJhdG9ycztcbn07XG5cbi8qKlxuICogUmV0cmlldmUgY29tcHV0ZWQgY3NzIHJ1bGVzIHdpdGggdXNhZ2Ugb2YgcmVnaXN0ZXJlZCBDU1MgR2VuZXJhdG9ycyBydW5uZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGJsb2NrVHlwZSBUaGUgY3VycmVudCBibG9jayB0eXBlXG4gKiBAcGFyYW0geyp9IGJsb2NrUHJvcHMgVGhlIGN1cnJlbnQgYmxvY2sgcHJvcGVydGllc1xuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY3VycmVudCBibG9jayBjc3Mgb3V0cHV0IG9mIGNzcyBnZW5lcmF0b3JzIVxuICovXG5leHBvcnQgY29uc3QgY29tcHV0ZWRDc3NSdWxlcyA9IChcblx0YmxvY2tUeXBlOiBPYmplY3QsXG5cdGJsb2NrUHJvcHM6IE9iamVjdFxuKTogc3RyaW5nID0+IHtcblx0bGV0IGNzcyA9ICcnO1xuXHRjb25zdCB7IHB1Ymxpc2hlckNzc0dlbmVyYXRvcnMgPSBbXSB9ID0gYmxvY2tUeXBlO1xuXG5cdGZvciAoY29uc3QgY29udHJvbElkIGluIHB1Ymxpc2hlckNzc0dlbmVyYXRvcnMpIHtcblx0XHRpZiAoIU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHB1Ymxpc2hlckNzc0dlbmVyYXRvcnMsIGNvbnRyb2xJZCkpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGdlbmVyYXRvciA9IHB1Ymxpc2hlckNzc0dlbmVyYXRvcnNbY29udHJvbElkXTtcblxuXHRcdGlmICghZ2VuZXJhdG9yPy50eXBlKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBjc3NHZW5lcmF0b3IgPSBuZXcgQ3NzR2VuZXJhdG9ycyhcblx0XHRcdGNvbnRyb2xJZCxcblx0XHRcdGdlbmVyYXRvcixcblx0XHRcdGJsb2NrUHJvcHNcblx0XHQpO1xuXG5cdFx0Y3NzICs9IGNzc0dlbmVyYXRvci5ydWxlcygpICsgJ1xcbic7XG5cdH1cblxuXHRyZXR1cm4gY3NzO1xufTtcblxuLyoqXG4gKiBDcmVhdGluZyBDU1MgUnVsZSFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3R5bGUgVGhlIHN0eWxlIG9iamVjdFxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY3JlYXRlZCBDU1MgUnVsZSFcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUNzc1J1bGUgPSAoc3R5bGU6IE9iamVjdCk6IHN0cmluZyA9PiB7XG5cdGlmICghaGFzQWxsUHJvcGVydGllcyhzdHlsZSwgWydzZWxlY3RvcicsICdwcm9wZXJ0aWVzJ10pKSB7XG5cdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0YFN0eWxlIHJ1bGU6ICVvICR7SlNPTi5zdHJpbmdpZnkoc3R5bGUpfSBhdm9pZCBjc3MgcnVsZSB2YWxpZGF0aW9uIWBcblx0XHQpO1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGNvbnN0IHsgcHJvcGVydGllcyA9IFtdLCBzZWxlY3RvciA9ICcnLCBibG9ja1Byb3BzID0ge30gfSA9IHN0eWxlO1xuXG5cdGxldCBzdHlsZUJvZHkgPSBbXTtcblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpO1xuXHRjb25zdCBsYXN0S2V5SW5kZXggPSBrZXlzLmxlbmd0aCAtIDE7XG5cblx0Zm9yIChjb25zdCBwcm9wZXJ0eSBpbiBwcm9wZXJ0aWVzKSB7XG5cdFx0aWYgKCFPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBwcm9wZXJ0eSkpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHZhbHVlID0gcHJvcGVydGllc1twcm9wZXJ0eV07XG5cblx0XHRpZiAoIWlzU3RyaW5nKHZhbHVlKSkge1xuXHRcdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0XHRgQ1NTIHByb3BlcnR5IHZhbHVlIG11c3QgYmUgc3RyaW5nIGdpdmVuICR7dHlwZW9mIHZhbHVlfSwgcGxlYXNlIGRvdWJsZSBjaGVjayBwcm9wZXJ0aWVzLmBcblx0XHRcdCk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRzdHlsZUJvZHkucHVzaChcblx0XHRcdGAke3Byb3BlcnR5fTogJHt2YWx1ZX0key0xID09PSB2YWx1ZS5pbmRleE9mKCc7JykgPyAnO1xcbicgOiAnXFxuJ30ke1xuXHRcdFx0XHRsYXN0S2V5SW5kZXggPT09IGtleXMuaW5kZXhPZihwcm9wZXJ0eSkgPyAnXFxuJyA6ICcnXG5cdFx0XHR9YFxuXHRcdCk7XG5cdH1cblxuXHRzdHlsZUJvZHkgPSBzdHlsZUJvZHkuam9pbignXFxuJyk7XG5cblx0aWYgKCFibG9ja1Byb3BzPy5hdHRyaWJ1dGVzKSB7XG5cdFx0cmV0dXJuIGAke3NlbGVjdG9yfXske3N0eWxlQm9keX19YDtcblx0fVxuXG5cdGdldFZhcnMoc3R5bGVCb2R5KS5mb3JFYWNoKChxdWVyeSkgPT4ge1xuXHRcdGNvbnN0IHJlcGxhY2VtZW50ID0gcHJlcGFyZShxdWVyeSwgYmxvY2tQcm9wcz8uYXR0cmlidXRlcyk7XG5cblx0XHRpZiAoIXJlcGxhY2VtZW50KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0c3R5bGVCb2R5ID0gc3R5bGVCb2R5LnJlcGxhY2UocXVlcnksIHJlcGxhY2VtZW50KS5yZXBsYWNlKC9cXHt8XFx9L2csICcnKTtcblx0fSk7XG5cblx0cmV0dXJuIGAke3NlbGVjdG9yfXske3N0eWxlQm9keX19YDtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgZHluYW1pYyB2YXJpYWJsZXMgZnJvbSBxdWVyaWVzIVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyaWVzIFRoZSBxdWVyaWVzIGFzIHN0cmluZy4gRXhhbXBsZTogXCJ7e3gueVsyXS56fX0ge3t4LmF9fVwiXG4gKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBUaGUgZHluYW1pYyB2YXJpYWJsZXMgbGlzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFycyhxdWVyaWVzOiBzdHJpbmcpOiBBcnJheTxzdHJpbmc+IHtcblx0Y29uc3QgcmVnZXggPSAve3tbXnt9XSt9fS9naTtcblx0Y29uc3QgbWF0Y2hlcyA9IHF1ZXJpZXMubWF0Y2hBbGwocmVnZXgpO1xuXHRjb25zdCByZXBsYWNlbWVudHMgPSBbXTtcblxuXHRmb3IgKGNvbnN0IG1hdGNoIG9mIG1hdGNoZXMpIHtcblx0XHRyZXBsYWNlbWVudHMucHVzaChtYXRjaFswXS5yZXBsYWNlKC9cXHt8XFx9L2csICcnKSk7XG5cdH1cblxuXHRyZXR1cm4gcmVwbGFjZW1lbnRzO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB3aW5kb3dbXCJsb2Rhc2hcIl07IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTMpO1xuIl0sIm5hbWVzIjpbInByZXBhcmUiLCJxdWVyeSIsImRhdGFzZXQiLCJwYXJzZWRRdWVyeSIsInNwbGl0IiwicHJvcHMiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwiYXJyIiwiaW5kZXhPZiIsIl9pdGVtIiwicHVzaCIsInJlcGxhY2UiLCJ0b0FycmF5IiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInZhbHVlcyIsIkFycmF5IiwiX2tleSIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwiaXRlbVZhbHVlIiwiYSIsIngiLCJyZWdleHAiLCJtIiwidGVtcFZhbHVlIiwiZXhlYyIsImxhc3RJbmRleCIsIm1hdGNoIiwiX3R5cGVvZiIsIm9iaiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJfdG9Qcm9wZXJ0eUtleSIsImFyZyIsImtleSIsImlucHV0IiwiaGludCIsInByaW0iLCJ0b1ByaW1pdGl2ZSIsInVuZGVmaW5lZCIsInJlcyIsImNhbGwiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJfZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiQ3NzR2VuZXJhdG9ycyIsIm5hbWUiLCJfcmVmIiwiYmxvY2tQcm9wcyIsInR5cGUiLCJmdW5jdGlvbiIsImNhbGxiYWNrIiwic2VsZWN0b3IiLCJwcm9wZXJ0aWVzIiwidGhpcyIsImdldFByb3BWYWx1ZSIsImF0dHJpYnV0ZU5hbWUiLCJhdHRyaWJ1dGVzIiwicnVsZXMiLCJhZGRSdWxlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsInNldFVuaXF1ZUNsYXNzTmFtZSIsImNsaWVudElkIiwiYWRkU3RhdGljUnVsZSIsImNyZWF0ZUNzc1J1bGUiLCJhZGRGdW5jdGlvblJ1bGUiLCJpbmplY3RIZWxwZXJzVG9Dc3NHZW5lcmF0b3JzIiwiaGVscGVycyIsImdlbmVyYXRvcnMiLCJnZW5lcmF0b3IiLCJrZXlzIiwiY29tcHV0ZWRDc3NSdWxlcyIsImJsb2NrVHlwZSIsImNzcyIsInB1Ymxpc2hlckNzc0dlbmVyYXRvcnMiLCJjb250cm9sSWQiLCJoYXNPd25Qcm9wZXJ0eSIsInN0eWxlIiwiaSIsImhhc0FsbFByb3BlcnRpZXMiLCJjb25zb2xlIiwid2FybiIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdHlsZUJvZHkiLCJsYXN0S2V5SW5kZXgiLCJwcm9wZXJ0eSIsImlzU3RyaW5nIiwiam9pbiIsInF1ZXJpZXMiLCJyZWdleCIsIm1hdGNoZXMiLCJtYXRjaEFsbCIsInJlcGxhY2VtZW50cyIsImdldFZhcnMiLCJyZXBsYWNlbWVudCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ3aW5kb3ciLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJnZXQiLCJwcm9wIiwiciIsInRvU3RyaW5nVGFnIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=